<head>
  <title>Exportapedia</title>
</head>

<body>
  <div class="jumbotron">
  <h3 style="margin-bottom:0px;">Exportapedia: $$ Global Arms Sales in 2010 $$ </h3>
</div>
  <div id="container" style="width: 80%; height: 800px; margin-top:0px;"></div>
<div>

</div>

  <script>
    var map= new Datamap({element: document.getElementById('container'),
    done: function(datamap) {
    datamap.svg.selectAll('.datamaps-subunit').on('click', function(geography, data) {

         for(var y=0; y<armsdata.length; y++){

           if(armsdata[y].e=== geography.properties.name){
          if(!geography.properties.count){

            var m = {};
            m[geography.id] = '#ff3300';
              datamap.updateChoropleth(m);

             geography.properties.count= armsdata[y].v;

            for(var z=0; z< datamap.worldTopo.objects.world.geometries.length; z++){
              if(datamap.worldTopo.objects.world.geometries[z].properties.name== armsdata[y].i){
                var n={};
                n[datamap.worldTopo.objects.world.geometries[z].id]= '#000000';
                   datamap.updateChoropleth(n);
              }
            }

         }else{
           geography.properties.count= 0;
         }
      }
   }
});
},
    projection: 'mercator',
    geographyConfig: {
       dataUrl: null, //if not null, datamaps will fetch the map JSON (currently only supports topojson)
       hideAntarctica: true,
       borderWidth: 1,
       borderOpacity: 1,
       borderColor: '#FDFDFD',
       popupTemplate: function(geo, data) { //this function should just return a string
         return ['<div class="hoverinfo"><strong>',
                        geo.properties.name,
                        ' sold: ',
                        geo.properties.count,
                        '</strong></div>'].join('');
       },
       popupOnHover: true, //disable the popup while hovering
       highlightOnHover: true,
       highlightFillColor: '#FC8D59',
       highlightBorderColor: 'rgba(250, 15, 160, 0.2)',
       highlightBorderWidth: 2,
       highlightBorderOpacity: 1
   }
  });


  </script>

</body>
